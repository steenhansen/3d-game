<!DOCTYPE html>

tests are shown in the console

<script type="text/javascript" src="collisions.js"></script>










<script>


  function _test_collisions() {
    const field_width = 1000;
    const room_width = 100;
    const field_depth = 1000;
    const room_depth = 100;
    let collision_sizes = [field_width, room_width, field_depth, room_depth];

    test_results = [];

    test_results.push(_try_collision(1, { m_x: 500, m_y: 500 }, { m_x: 500, m_y: 500 }, true, collision_sizes));

    test_results.push(_try_collision(2, { m_x: 500, m_y: 500 }, { m_x: 400, m_y: 400 }, true, collision_sizes));
    test_results.push(_try_collision(3, { m_x: 500, m_y: 500 }, { m_x: 399, m_y: 400 }, false, collision_sizes));
    test_results.push(_try_collision(4, { m_x: 500, m_y: 500 }, { m_x: 400, m_y: 399 }, false, collision_sizes));
    test_results.push(_try_collision(5, { m_x: 500, m_y: 500 }, { m_x: 399, m_y: 399 }, false, collision_sizes));

    test_results.push(_try_collision(6, { m_x: 500, m_y: 500 }, { m_x: 600, m_y: 400 }, true, collision_sizes));
    test_results.push(_try_collision(7, { m_x: 500, m_y: 500 }, { m_x: 601, m_y: 400 }, false, collision_sizes));
    test_results.push(_try_collision(8, { m_x: 500, m_y: 500 }, { m_x: 600, m_y: 399 }, false, collision_sizes));
    test_results.push(_try_collision(9, { m_x: 500, m_y: 500 }, { m_x: 601, m_y: 399 }, false, collision_sizes));

    test_results.push(_try_collision(10, { m_x: 500, m_y: 500 }, { m_x: 600, m_y: 600 }, true, collision_sizes));
    test_results.push(_try_collision(11, { m_x: 500, m_y: 500 }, { m_x: 601, m_y: 600 }, false, collision_sizes));
    test_results.push(_try_collision(12, { m_x: 500, m_y: 500 }, { m_x: 600, m_y: 601 }, false, collision_sizes));
    test_results.push(_try_collision(13, { m_x: 500, m_y: 500 }, { m_x: 601, m_y: 601 }, false, collision_sizes));

    test_results.push(_try_collision(14, { m_x: 500, m_y: 500 }, { m_x: 400, m_y: 600 }, true, collision_sizes));
    test_results.push(_try_collision(15, { m_x: 500, m_y: 500 }, { m_x: 399, m_y: 600 }, false, collision_sizes));
    test_results.push(_try_collision(16, { m_x: 500, m_y: 500 }, { m_x: 400, m_y: 601 }, false, collision_sizes));
    test_results.push(_try_collision(17, { m_x: 500, m_y: 500 }, { m_x: 399, m_y: 601 }, false, collision_sizes));

    test_results.push(_try_collision(18, { m_x: 0, m_y: 0 }, { m_x: 900, m_y: 900 }, true, collision_sizes));
    test_results.push(_try_collision(19, { m_x: 0, m_y: 0 }, { m_x: 899, m_y: 900 }, false, collision_sizes));
    test_results.push(_try_collision(20, { m_x: 0, m_y: 0 }, { m_x: 900, m_y: 899 }, false, collision_sizes));
    test_results.push(_try_collision(21, { m_x: 0, m_y: 0 }, { m_x: 899, m_y: 899 }, false, collision_sizes));

    test_results.push(_try_collision(22, { m_x: 999, m_y: 0 }, { m_x: 99, m_y: 900 }, true, collision_sizes));
    test_results.push(_try_collision(23, { m_x: 999, m_y: 0 }, { m_x: 100, m_y: 900 }, false, collision_sizes));
    test_results.push(_try_collision(24, { m_x: 999, m_y: 0 }, { m_x: 100, m_y: 899 }, false, collision_sizes));
    test_results.push(_try_collision(25, { m_x: 999, m_y: 0 }, { m_x: 100, m_y: 899 }, false, collision_sizes));

    test_results.push(_try_collision(26, { m_x: 999, m_y: 999 }, { m_x: 99, m_y: 99 }, true, collision_sizes));
    test_results.push(_try_collision(27, { m_x: 999, m_y: 999 }, { m_x: 100, m_y: 99 }, false, collision_sizes));
    test_results.push(_try_collision(28, { m_x: 999, m_y: 999 }, { m_x: 99, m_y: 100 }, false, collision_sizes));
    test_results.push(_try_collision(29, { m_x: 999, m_y: 999 }, { m_x: 100, m_y: 100 }, false, collision_sizes));

    test_results.push(_try_collision(30, { m_x: 0, m_y: 999 }, { m_x: 900, m_y: 99 }, true, collision_sizes));
    test_results.push(_try_collision(30, { m_x: 0, m_y: 999 }, { m_x: 899, m_y: 99 }, false, collision_sizes));
    test_results.push(_try_collision(30, { m_x: 0, m_y: 999 }, { m_x: 900, m_y: 100 }, false, collision_sizes));
    test_results.push(_try_collision(30, { m_x: 0, m_y: 999 }, { m_x: 899, m_y: 100 }, false, collision_sizes));

    the_results = '';
    for (a_result of test_results) {
      the_results += a_result;
    }
    dbg_print("_test_collisions results: ", the_results);
  }

  function _try_collision(test_num, a_thing, an_object, does_collide, collision_sizes) {
    a_collision = hasCollided(a_thing, an_object, collision_sizes);
    if (a_collision !== does_collide) {
      if (does_collide) {
        return "\n" + test_num + ' error should collide ' + JSON.stringify(a_thing) + JSON.stringify(an_object) +
          ' ' + a_collision + '<>' + does_collide;
      } else {
        return "\n" + test_num + ' error should NOT collide ' + JSON.stringify(a_thing) + JSON.stringify(an_object) +
          ' ' + a_collision + '<>' + does_collide;
      }
    }
    return "  " + test_num + 'ok';
  }

  _test_collisions();
</script>