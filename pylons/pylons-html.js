document.getElementById('pylon-html').innerHTML = `
<div id="pylon-exit"></div>
<div id="pylon-start"></div>



  <div id="pylon-00"></div>
  <div id="pylon-01"></div>
  <div id="pylon-02"></div>
  <div id="pylon-03"></div>
  <div id="pylon-04"></div>
  <div id="pylon-05"></div>
  <div id="pylon-06"></div>
  <div id="pylon-07"></div>
  <div id="pylon-08"></div>
  <div id="pylon-09"></div>
  <div id="pylon-0A"></div>
  <div id="pylon-0B"></div>
  <div id="pylon-0C"></div>
  <div id="pylon-0D"></div>
  <div id="pylon-0E"></div>
  <div id="pylon-0F"></div>
  <div id="pylon-0G"></div>
  <div id="pylon-0H"></div>
  <div id="pylon-0I"></div>
  <div id="pylon-0J"></div>
  <div id="pylon-0K"></div>
  <div id="pylon-0L"></div>
  <div id="pylon-0M"></div>
  <div id="pylon-0N"></div>
  <div id="pylon-0O"></div>
  <div id="pylon-0P"></div>
  <div id="pylon-0Q"></div>
  <div id="pylon-0R"></div>
  <div id="pylon-0S"></div>
  <div id="pylon-0T"></div>
  <div id="pylon-0U"></div>
  <div id="pylon-0V"></div>
  <div id="pylon-0W"></div>
  <div id="pylon-0X"></div>
  <div id="pylon-0Z"></div>

  <div id="pylon-10"></div>
  <div id="pylon-11"></div>
  <div id="pylon-12"></div>
  <div id="pylon-13"></div>
  <div id="pylon-14"></div>
  <div id="pylon-15"></div>
  <div id="pylon-16"></div>
  <div id="pylon-17"></div>
  <div id="pylon-18"></div>
  <div id="pylon-19"></div>
  <div id="pylon-1A"></div>
  <div id="pylon-1B"></div>
  <div id="pylon-1C"></div>
  <div id="pylon-1D"></div>
  <div id="pylon-1E"></div>
  <div id="pylon-1F"></div>
  <div id="pylon-1G"></div>
  <div id="pylon-1H"></div>
  <div id="pylon-1I"></div>
  <div id="pylon-1J"></div>
  <div id="pylon-1K"></div>
  <div id="pylon-1L"></div>
  <div id="pylon-1M"></div>
  <div id="pylon-1N"></div>
  <div id="pylon-1O"></div>
  <div id="pylon-1P"></div>
  <div id="pylon-1Q"></div>
  <div id="pylon-1R"></div>
  <div id="pylon-1S"></div>
  <div id="pylon-1T"></div>
  <div id="pylon-1U"></div>
  <div id="pylon-1V"></div>
  <div id="pylon-1W"></div>
  <div id="pylon-1X"></div>
  <div id="pylon-1Z"></div>

  <div id="pylon-20"></div>
  <div id="pylon-21"></div>
  <div id="pylon-22"></div>
  <div id="pylon-23"></div>
  <div id="pylon-24"></div>
  <div id="pylon-25"></div>
  <div id="pylon-26"></div>
  <div id="pylon-27"></div>
  <div id="pylon-28"></div>
  <div id="pylon-29"></div>
  <div id="pylon-2A"></div>
  <div id="pylon-2B"></div>
  <div id="pylon-2C"></div>
  <div id="pylon-2D"></div>
  <div id="pylon-2E"></div>
  <div id="pylon-2F"></div>
  <div id="pylon-2G"></div>
  <div id="pylon-2H"></div>
  <div id="pylon-2I"></div>
  <div id="pylon-2J"></div>
  <div id="pylon-2K"></div>
  <div id="pylon-2L"></div>
  <div id="pylon-2M"></div>
  <div id="pylon-2N"></div>
  <div id="pylon-2O"></div>
  <div id="pylon-2P"></div>
  <div id="pylon-2Q"></div>
  <div id="pylon-2R"></div>
  <div id="pylon-2S"></div>
  <div id="pylon-2T"></div>
  <div id="pylon-2U"></div>
  <div id="pylon-2V"></div>
  <div id="pylon-2W"></div>
  <div id="pylon-2X"></div>
  <div id="pylon-2Z"></div>


  <div id="pylon-30"></div>
  <div id="pylon-31"></div>
  <div id="pylon-32"></div>
  <div id="pylon-33"></div>
  <div id="pylon-34"></div>
  <div id="pylon-35"></div>
  <div id="pylon-36"></div>
  <div id="pylon-37"></div>
  <div id="pylon-38"></div>
  <div id="pylon-39"></div>
  <div id="pylon-3A"></div>
  <div id="pylon-3B"></div>
  <div id="pylon-3C"></div>
  <div id="pylon-3D"></div>
  <div id="pylon-3E"></div>
  <div id="pylon-3F"></div>
  <div id="pylon-3G"></div>
  <div id="pylon-3H"></div>
  <div id="pylon-3I"></div>
  <div id="pylon-3J"></div>
  <div id="pylon-3K"></div>
  <div id="pylon-3L"></div>
  <div id="pylon-3M"></div>
  <div id="pylon-3N"></div>
  <div id="pylon-3O"></div>
  <div id="pylon-3P"></div>
  <div id="pylon-3Q"></div>
  <div id="pylon-3R"></div>
  <div id="pylon-3S"></div>
  <div id="pylon-3T"></div>
  <div id="pylon-3U"></div>
  <div id="pylon-3V"></div>
  <div id="pylon-3W"></div>
  <div id="pylon-3X"></div>
  <div id="pylon-3Z"></div>


  <div id="pylon-40"></div>
  <div id="pylon-41"></div>
  <div id="pylon-42"></div>
  <div id="pylon-43"></div>
  <div id="pylon-44"></div>
  <div id="pylon-45"></div>
  <div id="pylon-46"></div>
  <div id="pylon-47"></div>
  <div id="pylon-48"></div>
  <div id="pylon-49"></div>
  <div id="pylon-4A"></div>
  <div id="pylon-4B"></div>
  <div id="pylon-4C"></div>
  <div id="pylon-4D"></div>
  <div id="pylon-4E"></div>
  <div id="pylon-4F"></div>
  <div id="pylon-4G"></div>
  <div id="pylon-4H"></div>
  <div id="pylon-4I"></div>
  <div id="pylon-4J"></div>
  <div id="pylon-4K"></div>
  <div id="pylon-4L"></div>
  <div id="pylon-4M"></div>
  <div id="pylon-4N"></div>
  <div id="pylon-4O"></div>
  <div id="pylon-4P"></div>
  <div id="pylon-4Q"></div>
  <div id="pylon-4R"></div>
  <div id="pylon-4S"></div>
  <div id="pylon-4T"></div>
  <div id="pylon-4U"></div>
  <div id="pylon-4V"></div>
  <div id="pylon-4W"></div>
  <div id="pylon-4X"></div>
  <div id="pylon-4Z"></div>

  <div id="pylon-50"></div>
  <div id="pylon-51"></div>
  <div id="pylon-52"></div>
  <div id="pylon-53"></div>
  <div id="pylon-54"></div>
  <div id="pylon-55"></div>
  <div id="pylon-56"></div>
  <div id="pylon-57"></div>
  <div id="pylon-58"></div>
  <div id="pylon-59"></div>
  <div id="pylon-5A"></div>
  <div id="pylon-5B"></div>
  <div id="pylon-5C"></div>
  <div id="pylon-5D"></div>
  <div id="pylon-5E"></div>
  <div id="pylon-5F"></div>
  <div id="pylon-5G"></div>
  <div id="pylon-5H"></div>
  <div id="pylon-5I"></div>
  <div id="pylon-5J"></div>
  <div id="pylon-5K"></div>
  <div id="pylon-5L"></div>
  <div id="pylon-5M"></div>
  <div id="pylon-5N"></div>
  <div id="pylon-5O"></div>
  <div id="pylon-5P"></div>
  <div id="pylon-5Q"></div>
  <div id="pylon-5R"></div>
  <div id="pylon-5S"></div>
  <div id="pylon-5T"></div>
  <div id="pylon-5U"></div>
  <div id="pylon-5V"></div>
  <div id="pylon-5W"></div>
  <div id="pylon-5X"></div>
  <div id="pylon-5Z"></div>



  <div id="pylon-60"></div>
  <div id="pylon-61"></div>
  <div id="pylon-62"></div>
  <div id="pylon-63"></div>
  <div id="pylon-64"></div>
  <div id="pylon-65"></div>
  <div id="pylon-66"></div>
  <div id="pylon-67"></div>
  <div id="pylon-68"></div>
  <div id="pylon-69"></div>
  <div id="pylon-6A"></div>
  <div id="pylon-6B"></div>
  <div id="pylon-6C"></div>
  <div id="pylon-6D"></div>
  <div id="pylon-6E"></div>
  <div id="pylon-6F"></div>
  <div id="pylon-6G"></div>
  <div id="pylon-6H"></div>
  <div id="pylon-6I"></div>
  <div id="pylon-6J"></div>
  <div id="pylon-6K"></div>
  <div id="pylon-6L"></div>
  <div id="pylon-6M"></div>
  <div id="pylon-6N"></div>
  <div id="pylon-6O"></div>
  <div id="pylon-6P"></div>
  <div id="pylon-6Q"></div>
  <div id="pylon-6R"></div>
  <div id="pylon-6S"></div>
  <div id="pylon-6T"></div>
  <div id="pylon-6U"></div>
  <div id="pylon-6V"></div>
  <div id="pylon-6W"></div>
  <div id="pylon-6X"></div>
  <div id="pylon-6Z"></div>



  <div id="pylon-70"></div>
  <div id="pylon-71"></div>
  <div id="pylon-72"></div>
  <div id="pylon-73"></div>
  <div id="pylon-74"></div>
  <div id="pylon-75"></div>
  <div id="pylon-76"></div>
  <div id="pylon-77"></div>
  <div id="pylon-78"></div>
  <div id="pylon-79"></div>
  <div id="pylon-7A"></div>
  <div id="pylon-7B"></div>
  <div id="pylon-7C"></div>
  <div id="pylon-7D"></div>
  <div id="pylon-7E"></div>
  <div id="pylon-7F"></div>
  <div id="pylon-7G"></div>
  <div id="pylon-7H"></div>
  <div id="pylon-7I"></div>
  <div id="pylon-7J"></div>
  <div id="pylon-7K"></div>
  <div id="pylon-7L"></div>
  <div id="pylon-7M"></div>
  <div id="pylon-7N"></div>
  <div id="pylon-7O"></div>
  <div id="pylon-7P"></div>
  <div id="pylon-7Q"></div>
  <div id="pylon-7R"></div>
  <div id="pylon-7S"></div>
  <div id="pylon-7T"></div>
  <div id="pylon-7U"></div>
  <div id="pylon-7V"></div>
  <div id="pylon-7W"></div>
  <div id="pylon-7X"></div>
  <div id="pylon-7Z"></div>



  <div id="pylon-80"></div>
  <div id="pylon-81"></div>
  <div id="pylon-82"></div>
  <div id="pylon-83"></div>
  <div id="pylon-84"></div>
  <div id="pylon-85"></div>
  <div id="pylon-86"></div>
  <div id="pylon-87"></div>
  <div id="pylon-88"></div>
  <div id="pylon-89"></div>
  <div id="pylon-8A"></div>
  <div id="pylon-8B"></div>
  <div id="pylon-8C"></div>
  <div id="pylon-8D"></div>
  <div id="pylon-8F"></div>
  <div id="pylon-8F"></div>
  <div id="pylon-8G"></div>
  <div id="pylon-8H"></div>
  <div id="pylon-8I"></div>
  <div id="pylon-8J"></div>
  <div id="pylon-8K"></div>
  <div id="pylon-8L"></div>
  <div id="pylon-8M"></div>
  <div id="pylon-8N"></div>
  <div id="pylon-8O"></div>
  <div id="pylon-8P"></div>
  <div id="pylon-8Q"></div>
  <div id="pylon-8R"></div>
  <div id="pylon-8S"></div>
  <div id="pylon-8T"></div>
  <div id="pylon-8U"></div>
  <div id="pylon-8V"></div>
  <div id="pylon-8W"></div>
  <div id="pylon-8X"></div>
  <div id="pylon-8Z"></div>


  <div id="pylon-90"></div>
  <div id="pylon-91"></div>
  <div id="pylon-92"></div>
  <div id="pylon-93"></div>
  <div id="pylon-94"></div>
  <div id="pylon-95"></div>
  <div id="pylon-96"></div>
  <div id="pylon-97"></div>
  <div id="pylon-98"></div>
  <div id="pylon-99"></div>
  <div id="pylon-9A"></div>
  <div id="pylon-9B"></div>
  <div id="pylon-9C"></div>
  <div id="pylon-9D"></div>
  <div id="pylon-9E"></div>
  <div id="pylon-9F"></div>
  <div id="pylon-9G"></div>
  <div id="pylon-9H"></div>
  <div id="pylon-9I"></div>
  <div id="pylon-9J"></div>
  <div id="pylon-9K"></div>
  <div id="pylon-9L"></div>
  <div id="pylon-9M"></div>
  <div id="pylon-9N"></div>
  <div id="pylon-9O"></div>
  <div id="pylon-9P"></div>
  <div id="pylon-9Q"></div>
  <div id="pylon-9R"></div>
  <div id="pylon-9S"></div>
  <div id="pylon-9T"></div>
  <div id="pylon-9U"></div>
  <div id="pylon-9V"></div>
  <div id="pylon-9W"></div>
  <div id="pylon-9X"></div>
  <div id="pylon-9Z"></div>



  <div id="pylon-A0"></div>
  <div id="pylon-A1"></div>
  <div id="pylon-A2"></div>
  <div id="pylon-A3"></div>
  <div id="pylon-A4"></div>
  <div id="pylon-A5"></div>
  <div id="pylon-A6"></div>
  <div id="pylon-A7"></div>
  <div id="pylon-A8"></div>
  <div id="pylon-A9"></div>
  <div id="pylon-AA"></div>
  <div id="pylon-AB"></div>
  <div id="pylon-AC"></div>
  <div id="pylon-AD"></div>
  <div id="pylon-AE"></div>
  <div id="pylon-AF"></div>
  <div id="pylon-AG"></div>
  <div id="pylon-AH"></div>
  <div id="pylon-AI"></div>
  <div id="pylon-AJ"></div>
  <div id="pylon-AK"></div>
  <div id="pylon-AL"></div>
  <div id="pylon-AM"></div>
  <div id="pylon-AN"></div>
  <div id="pylon-AO"></div>
  <div id="pylon-AP"></div>
  <div id="pylon-AQ"></div>
  <div id="pylon-AR"></div>
  <div id="pylon-AS"></div>
  <div id="pylon-AT"></div>
  <div id="pylon-AU"></div>
  <div id="pylon-AV"></div>
  <div id="pylon-AW"></div>
  <div id="pylon-AX"></div>
  <div id="pylon-AZ"></div>



  <div id="pylon-B0"></div>
  <div id="pylon-B1"></div>
  <div id="pylon-B2"></div>
  <div id="pylon-B3"></div>
  <div id="pylon-B4"></div>
  <div id="pylon-B5"></div>
  <div id="pylon-B6"></div>
  <div id="pylon-B7"></div>
  <div id="pylon-B8"></div>
  <div id="pylon-B9"></div>
  <div id="pylon-BA"></div>
  <div id="pylon-BB"></div>
  <div id="pylon-BC"></div>
  <div id="pylon-BD"></div>
  <div id="pylon-BE"></div>
  <div id="pylon-BF"></div>
  <div id="pylon-BG"></div>
  <div id="pylon-BH"></div>
  <div id="pylon-BI"></div>
  <div id="pylon-BJ"></div>
  <div id="pylon-BK"></div>
  <div id="pylon-BL"></div>
  <div id="pylon-BM"></div>
  <div id="pylon-BN"></div>
  <div id="pylon-BO"></div>
  <div id="pylon-BP"></div>
  <div id="pylon-BQ"></div>
  <div id="pylon-BR"></div>
  <div id="pylon-BS"></div>
  <div id="pylon-BT"></div>
  <div id="pylon-BU"></div>
  <div id="pylon-BV"></div>
  <div id="pylon-BW"></div>
  <div id="pylon-BX"></div>
  <div id="pylon-BZ"></div>


 `;

function drawPylons(the_player, the_pylons) {
  changed_pylons = [];
  number_pylons = the_pylons.length;
  for (let pylon_index = 0; pylon_index < number_pylons; pylon_index++) {
    a_pylon = the_pylons[pylon_index];
    pylonSet(the_player, a_pylon);
    if (a_pylon.t_pylon_hit_flash > 0) {
      a_pylon.t_pylon_hit_flash--;
    } else {
      delete a_pylon.t_pylon_hit_flash;
    }
    changed_pylons[pylon_index] = a_pylon;

  }
  return changed_pylons;
}

function pylonFront(pylon_vlines, front_panel_id, outline_color, do_flash, difference_yy, poly_fill, pylon_type, vert_text, pylon_alive) {
  let [left_vline, middle_vline, _right_vline] = pylon_vlines;
  let [left_front_top, left_front_bot] = left_vline;
  let [right_front_top, right_front_bot] = middle_vline;
  left_right_tops_bots = [left_front_top, right_front_top, left_front_bot, right_front_bot];
  if (isNaN(left_front_top)) {
    //console.log("ddddddXXXXXXXXXXXXXXXXXXXXXXXXXXXX");
  }
  let front_pylon = pylonPolygon(left_right_tops_bots, front_panel_id, outline_color, do_flash, difference_yy, poly_fill, pylon_type, vert_text, pylon_alive);
  return front_pylon;
}

function pylonPolygon(a_polygon, panel_id, outline_color, do_flash, difference_yy, poly_fill, pylon_type, vert_text, pylon_alive) {
  if (pylon_alive) {
    fill_color = poly_fill;
  } else {
    fill_color = 'black';
  }
  if (pylon_type == 'is-pylon-sign') {
    svg_panel = signPylon(a_polygon, vert_text, fill_color);
  } else {
    svg_panel = pylonSide(a_polygon, fill_color, panel_id, pylon_alive);
  }
  if (do_flash) {
    svg_outlines = outlineFlash(a_polygon, panel_id);
  } else if (!pylon_alive && pylon_type == 'is-pylon') {
    svg_outlines = pylonOutline(a_polygon, panel_id, difference_yy, "grey");

  } else if (outline_color) {
    svg_outlines = pylonOutline(a_polygon, panel_id, difference_yy, outline_color);
  }
  svg_polygon = svg_outlines + svg_panel;
  return svg_polygon;
}

function pylonOutline(a_polygon, panel_id, difference_yy, outline_color) {
  outline_width = outlineWidth(difference_yy);
  let [left_front_top, right_front_top, left_front_bot, right_front_bot] = a_polygon;
  let [top_left_x, top_left_y] = left_front_top;
  let [top_right_x, top_right_y] = right_front_top;
  let [bot_left_x, bot_left_y] = left_front_bot;
  let [bot_right_x, bot_right_y] = right_front_bot;
  svg_outlines = `<polygon fill="none"  id="${panel_id}" stroke="${outline_color}"
      stroke-width="${outline_width}px"
                      points="${top_left_x},${top_left_y}
                              ${top_right_x},${top_right_y}
                              ${bot_right_x},${bot_right_y}
                              ${bot_left_x},${bot_left_y}      " />`;
  return svg_outlines;
}

function outlineFlash(a_polygon, panel_id) {
  let [left_front_top, right_front_top, left_front_bot, right_front_bot] = a_polygon;
  let [top_left_x, top_left_y] = left_front_top;
  let [top_right_x, top_right_y] = right_front_top;
  let [bot_left_x, bot_left_y] = left_front_bot;
  let [bot_right_x, bot_right_y] = right_front_bot;
  svg_outlines = `<polygon   id="${panel_id}" stroke="white" fill="none"
         stroke-width="15px" 
                      points="${top_left_x},${top_left_y}
                              ${top_right_x},${top_right_y}
                              ${bot_right_x},${bot_right_y}
                              ${bot_left_x},${bot_left_y}      " />`;
  return svg_outlines;
}

function pylonSide(a_polygon, poly_fill, panel_id, pylon_alive) {
  if (pylon_alive) {
    fill_color = poly_fill;
  } else {
    fill_color = 'black';
  }
  let [left_front_top, right_front_top, left_front_bot, right_front_bot] = a_polygon;
  let [top_left_x, top_left_y] = left_front_top;
  let [top_right_x, top_right_y] = right_front_top;
  let [bot_left_x, bot_left_y] = left_front_bot;
  let [bot_right_x, bot_right_y] = right_front_bot;
  svg_panel = `<polygon fill="${fill_color}" id="${panel_id}"
                      points="${top_left_x},${top_left_y}
                              ${top_right_x},${top_right_y}
                              ${bot_right_x},${bot_right_y}
                              ${bot_left_x},${bot_left_y}      " />`;
  return svg_panel;
}

function outlineWidth(difference_yy) {
  if (difference_yy < 8) {
    outline_width = 6;
  } else if (difference_yy < 16) {
    outline_width = 5.5;
  } else if (difference_yy < 24) {
    outline_width = 5;
  } else if (difference_yy < 32) {
    outline_width = 4.5;
  } else if (difference_yy < 40) {
    outline_width = 4;
  } else if (difference_yy < 100) {
    outline_width = 3.5;
  } else if (difference_yy < 200) {
    outline_width = 3;
  } else if (difference_yy < 300) {
    outline_width = 2.5;
  } else if (difference_yy < 400) {
    outline_width = 2;
  } else if (difference_yy < 500) {
    outline_width = 1.5;
  } else if (difference_yy < 600) {
    outline_width = 1;
  } else if (difference_yy < 700) {
    outline_width = 0.5;
  } else {
    outline_width = 0;
  }
  outline_adjusted = outline_width * PYLON_OUTLINE_ADJUST;
  return outline_adjusted;
}