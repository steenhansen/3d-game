<!DOCTYPE html>


<!-- <meta name="apple-mobile-web-app-capable" content="yes" /> -->


<link rel="icon" type="image/x-icon" href="images/favicon.png">

<div id="the-css">
  <link rel="stylesheet" href="values/variables.css" />
  <link rel="stylesheet" href="scene/layout.css" />
  <link rel="stylesheet" href="field/field.css" />
  <link rel="stylesheet" href="columns/columns.css" />
  <link rel="stylesheet" href="land/land.css" />
  <link rel="stylesheet" href="enemy/enemy.css" />
  <link rel="stylesheet" href="missile/missile.css" />
  <link rel="stylesheet" href="sky/sky.css" />
  <link rel="stylesheet" href="missile/missile-balls.css" />
  <link rel="stylesheet" href="input/arrows.css" />
  <link rel="stylesheet" href="input/directions.css" />
</div>

<div id="js-constants">
  <script type="text/javascript" src="values/states.js"></script>
  <script type="text/javascript" src="values/the_constants.js"></script>
  <script type="text/javascript" src="columns/columns_data.js"></script>
  <script type="text/javascript" src="data/colors.js"></script>
  <script type="text/javascript" src="data/data.js"></script>


</div>

<div id="the-svgs">
  <div id='column-svg'> </div>
  <div id='svg-arrows'> </div>
</div>

<div id="js-before">
  <script type="text/javascript" src="values/the_globals.js"></script>

  <script type="text/javascript" src="devices/orientation.js"></script>

  <script type="text/javascript" src="things/objects.js"></script>
  <script type="text/javascript" src="svg-rect/svg-into-rect.js"></script>
  <script type="text/javascript" src="scene/overflow.js"></script>
  <script type="text/javascript" src="player/player_data.js"></script>
  <script type="text/javascript" src="player/player_code.js"></script>
  <script type="text/javascript" src="things/panel.js"></script>
  <script type="text/javascript" src="things/collisions.js"></script>
  <script type="text/javascript" src="sky/sky_code.js"></script>
  <script type="text/javascript" src="input/the_keyboard.js"></script>
  <script type="text/javascript" src="scene/vanish_point.js"></script>
  <script type="text/javascript" src="field/field_code.js"></script>


  <script type="text/javascript" src="columns/columns_svg.js"></script>

  <script type="text/javascript" src="columns/columns_code.js"></script>

  <script type="text/javascript" src="scene/scene_3d.js"></script>

  <script rel="text/javascript" src="field/field_test.js"></script>


  <script type="text/javascript" src="external/hammer.js"></script>

</div>



<div id='click-to-begin'>
  <br>
  <button id="begin-3d" type="button" onclick=" ani_sec = 'ani-after-begin';">Begin 3-D Game</button>
  <br>
</div>


<div id="the-scene">

  <!--      wait-for- mobile-touch  -->
  <div id='start-mobile'>
    <ul id='mobile-list'>
      <li>Touch to start</li>
      <li>Tap white arrows to steer</li>
      <li>Double tap to shoot</li>
      <li>Press to stop moving</li>
      <li>Swipe to quit</li>
    </ul>
  </div>
  <div id="touch-boxes"></div>
  <div id="touch-arrows"></div>

  <div id="playing-game">
    <div id="the-sun"></div>
    <div id="sky-aperature">
      <div id="the-sky"> </div>
      <div id="the-pyramids"></div>
    </div>
    <div id="enemy-area"></div>
    <div id="missile-area"></div>
    <div id="the-field"> </div>
    <div id='column-html'> </div>
    <canvas id="the-draw" width=" 1024" height="512"></canvas>
  </div>

  <div id="the-landing">
    <div id="land_nw"></div>
    <div id="land_ne"></div>
    <div id="land_sw"></div>
    <div id="land_se"></div>
  </div>


</div>


<div id="desktop-dir"></div>


<div id="js-inject-html">
  <script type="text/javascript" src="columns/columns_html.js"></script>
</div>



<div id="js-after">

  <script type="text/javascript" src="enemy/enemy_html.js"></script>
  <script type="text/javascript" src="missile/missile_html.js"></script>
  <script type="text/javascript" src="field/field_html.js"></script>
  <script type="text/javascript" src="enemy/enemy_code.js"></script>
  <script type="text/javascript" src="missile/missile_code.js"></script>


  <script type="text/javascript" src="land/land_nw_html.js"></script>
  <script type="text/javascript" src="land/land_ne_html.js"></script>
  <script type="text/javascript" src="land/land_sw_html.js"></script>
  <script type="text/javascript" src="land/land_se_html.js"></script>
  <script type="text/javascript" src="land/land_code.js"></script>




  <script type="text/javascript" src="input/touch-arrows.js"></script>
  <script type="text/javascript" src="input/arrows-svg.js"></script>
  <script type="text/javascript" src="input/fullscreen-touch.js"></script>
  <script type="text/javascript" src="input/arrows-html.js"></script>
  <script type="text/javascript" src="input/hammer-touch.js"></script>












  <script type="text/javascript" src="data/start.js"></script>
</div>






<script>



  let fast_init = 'fast-init';
  var ani_sec = 'ani-begin';

  function gameLoop(_time_stamp) {
    if (ani_sec == 'ani-begin') {
      animateStart();
    } else if (ani_sec == 'ani-after-begin') {
      initLanding();
      ani_sec = 'ani-landing';
    } else if (ani_sec == 'ani-landing') {
      ani_sec = animateLanding();
    } else if (ani_sec == 'ani-after-landing') {
      initElevator();
      ani_sec = 'ani-elevator';
    } else if (ani_sec == 'ani-elevator') {
      ani_sec = animateElevator();
    } else if (ani_sec == 'ani-after-elevator') {
      initPlay();
      ani_sec = 'ani-play';
    } else if (ani_sec == 'ani-play') {
      ani_sec = animateScene();
    } else if (ani_sec == 'ani-fly') {
      ani_sec = animateFly();
    } else if (ani_sec == 'ani-done') {
      resetSections();
      ani_sec = 'ani-begin';
      if (document.fullscreenElement != null) {
        document.exitFullscreen();
      }
    } else {
      console.log("error ani", ani_sec);
    }
    requestAnimationFrame(gameLoop);
  }

  gameLoop('start-ani-frames');

  if (window.AudioContext) {
    audio_context = new window.AudioContext();
  } else {
    audio_context = new window.webkitAudioContext();
  }
  /*
  let oscillator = audio_context.createOscillator();
  oscillator.connect(audio_context.destination);
  oscillator.type = 'square';
  oscillator.start();
  oscillator.stop(audio_context.currentTime + 0.05);
  */
  //console.log("initLeftRight initLeftRight");
  initLeftRight();




</script>